<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
        <record model="ir.ui.view" id="view_scm_entry_kanban">
          <field name="name">scm.entry.kanban</field>
          <field name="model">scm.entry</field>
          <field name="arch" type="xml">
              <kanban class="o_kanban_mobile">
                  <field name="name"/>
                  <field name="channel_ids"/>
                  <field name="originating_regulation_id"/>
                  <field name="campaign_type_id"/>
                  <field name="date_from"/>
                  <field name="date_to"/>
                  <templates>
                      <t t-name="kanban-box">
                          <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                              <div class="o_kanban_record_top mb16">
                                  <div class="o_kanban_record_headings mt4">
                                      SCM Name: <div class="o_kanban_record_title"><field name="name"/></div>
                                  </div>
                                  <div class="o_kanban_record_headings mt4">
                                      Related Project: <div class="o_kanban_record_title"><field name="project_id"/></div>
                                  </div>
                              </div>
                              <div class="o_kanban_record_top mb16">
                                  <div class="o_kanban_record_headings mt4">
                                      Start: <div class="o_kanban_record_title"><field name="date_from"/></div>
                                  </div>
                                  <div class="o_kanban_record_headings mt4">
                                      Stop: <div class="o_kanban_record_title"><field name="date_to"/></div>
                                  </div>
                              </div>
                          </div>
                      </t>
                  </templates>
              </kanban>
          </field>
      </record>

      <record id="view_scm_entry_tree" model="ir.ui.view">
          <field name="name">scm.entry.tree</field>
          <field name="model">scm.entry</field>
          <field name="priority">2</field>
          <field name="arch" type="xml">
              <tree string="SCM Entry">
                  <field name="name"/>
                  <field name="project_id"/>
                  <field name="project_scm_id"/>
                  <field name="user_id"/>
                  <field name="user_project_id"/>
                  <field name="channel_ids"/>
                  <field name="package_ids"/>
                  <field name="item_line_ids"/>
                  <field name="campaign_type_id"/>
                  <field name="date_from"/>
                  <field name="date_to"/>
              </tree>
          </field>
      </record>

      <record id="view_scm_entry_form" model="ir.ui.view">
          <field name="name">scm.entry.form</field>
          <field name="model">scm.entry</field>
          <field name="arch" type="xml">
              <form string="SCM Entry" class="o_sale_order">
                <sheet>
                    <div class="oe_title">
                      <h1>
                          <field name="name" class="o_text_overflow" placeholder="SCM Name"/>
                      </h1>
                    </div>
                    <group>
                        <group>
                            <field name="project_id"/>
                            <field name="project_scm_id"/>
                            <field name="user_id"/>
                            <field name="user_project_id"/>
                        </group>
                        <group>
                            <field name="date_from"/>
                            <field name="date_to"/>
                            <field name="campaign_type_id"/>
                            <field name="category_id"/>
                        </group>
                      </group>
                    <notebook>
                      <page name="channel_subselection" string="Channel Subselection">
                          <field name="channel_ids"/>
                      </page>
                      <page name="package_selection" string="Package Selection">
                        <field name="package_ids"/>
                      </page>
                      <page name="item_planning" string="Item Planning">
                          <field name="item_line_ids" widget="section_and_note_one2many">
                            <form>
                                <field name="sequence" invisible="1"/>
                                  <group>
                                    <field name="item_id"/>
                                    <field name="package_id"/>
                                    <field name="item_date_from"/>
                                    <field name="item_date_to"/>
                                    <field name="product_id"/>
                                    <field name="dimension"/>
                                    <field name="shipping_allocating"/>
                                    <field name="product_uom_id"/>
                                    <field name="quantity"/>
                                    <field name="item_tags_ids"/>
                                    <field name="sequence" invisible="1"/>
                                  </group>
                            </form>
                            <tree string="SCM Item Lines" editable="bottom" >
                                <control>
                                  <create name="add_item_control" string="Add an Item"/>
                                </control>

                                <field name="sequence" widget="handle" />
                                <field name="item_id"/>
                                <field name="package_id"/>
                                <field name="item_date_from"/>
                                <field name="item_date_to"/>
                                <field name="product_id"/>
                                <field name="dimension" optional="show"/>
                                <field name="shipping_allocating" optional="show"/>
                                <field name="product_uom_id"/>
                                <field name="quantity"/>
                                <field name="item_tags_ids" widget="many2many_tags" optional="show"/>
                            </tree>
                          </field>
                          <group name="note_group" col="6" class="mt-2 mt-md-0">
                            <group colspan="4">
                                <field name="note" nolabel="1" placeholder="Extra Item Notes..."/>
                            </group>
                            <group class="oe_subtotal_footer oe_right" colspan="2">
                                <field name="package_ids_total" colspan="2"/>
                                <field name="item_line_ids_total" colspan="2"/>
                            </group>
                            <group class="oe_subtotal_footer oe_right" colspan="2">
                                <field name="channel_ids_total" colspan="2"/>
                            </group>
                            <div class="oe_clear"/>
                        </group>
                      </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
              </form>
          </field>
      </record>

      <record id="view_scm_entry_gantt" model="ir.ui.view">
        <field name="name">scm.entry.gantt</field>
        <field name="model">scm.entry</field>
        <field name="arch" type="xml">
            <gantt
                    date_start="date_from"
                    date_stop="date_to"
                    default_group_by="name"
                    default_scale="week"
                    color="user_id"
                    scales="day,week,month,year"
                    precision="{'day': 'hour:full', 'week': 'day:full', 'month': 'day:full', 'year': 'day:full'}"
                    thumbnails="{'name': 'image_128'}">
                <field name="name"/>
                <field name="channel_ids"/>
                <field name="package_ids"/>
                <field name="item_line_ids"/>
                <templates>
                    <div t-name="gantt-popover" class="container-fluid">
                        <div class="row no-gutters">
                            <div class="col">
                                <ul class="pl-1 mb-0">
                                    <li>
                                      <strong>SCM:</strong>
                                      <t t-esc="name"/>
                                    </li>
                                    <li>
                                      <strong>Campaign Start:</strong>
                                      <t t-esc="date_from.format('YYYY-MM-DD hh:mm:ss A')"/>
                                    </li>
                                    <li>
                                      <strong>Campaign Stop:</strong>
                                      <t t-esc="date_to.format('YYYY-MM-DD hh:mm:ss A')"/>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </templates>
            </gantt>
        </field>
      </record>

      <record id="view_scm_entry_filter" model="ir.ui.view">
          <field name="name">scm.entry.list.select</field>
          <field name="model">scm.entry</field>
          <field name="priority" eval="15"/>
          <field name="arch" type="xml">
              <search string="Search SCM Entry">
                  <field name="channel_ids"/>
                  <field name="originating_regulation_id"/>
                  <field name="campaign_type_id"/>
                  <field name="date_from"/>
                  <field name="date_to"/>
                  <group expand="0" string="Group By">
                      <filter string="SCM" name="name" domain="[]" context="{'group_by': 'name'}"/>
                      <filter string="Channel" name="channel_ids" domain="[]" context="{'group_by': 'channel_ids'}"/>
                      <filter string="Package" name="package_ids" domain="[]" context="{'group_by': 'package_ids'}"/>
                      <filter string="Item" name="item_line_ids" domain="[]" context="{'group_by': 'item_line_ids'}"/>
                      <filter string="Project" name="project_id" domain="[]" context="{'group_by': 'project_id'}"/>
                      <filter string="Project Manager" name="user_project_id" domain="[]" context="{'group_by': 'user_project_id'}"/>
                      <filter string="Owner" name="user_id" domain="[]" context="{'group_by': 'user_id'}"/>
                  </group>
             </search>
          </field>
      </record>

      <record id="action_scm_entry_open" model="ir.actions.act_window">
          <field name="name">SCM Entry</field>
          <field name="type">ir.actions.act_window</field>
          <field name="res_model">scm.entry</field>
          <field name="view_mode">kanban,tree,form,gantt</field>
          <field name="search_view_id"/>
          <field name="context">{}</field>
          <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                  To create a new record
              </p><p>
                  <br/> Click on "Create"
              </p>
          </field>
      </record>

      <record id="scm_entry_action_view_kanban" model="ir.actions.act_window.view">
          <field name="sequence" eval="1"/>
          <field name="view_mode">kanban</field>
          <field name="view_id" ref="ihhg_master.view_scm_entry_kanban"/>
          <field name="act_window_id" ref="action_scm_entry_open"/>
      </record>

      <record id="scm_entry_action_view_tree" model="ir.actions.act_window.view">
          <field name="sequence" eval="2"/>
          <field name="view_mode">tree</field>
          <field name="view_id" ref="ihhg_master.view_scm_entry_tree"/>
          <field name="act_window_id" ref="action_scm_entry_open"/>
      </record>

      <record id="scm_entry_action_view_form" model="ir.actions.act_window.view">
          <field name="sequence" eval="3"/>
          <field name="view_mode">form</field>
          <field name="view_id" ref="ihhg_master.view_scm_entry_form"/>
          <field name="act_window_id" ref="action_scm_entry_open"/>
      </record>

      <record id="scm_entry_action_view_gantt" model="ir.actions.act_window.view">
        <field name="sequence" eval="4"/>
        <field name="view_mode">gantt</field>
        <field name="view_id" ref="ihhg_master.view_scm_entry_gantt"/>
        <field name="act_window_id" ref="action_scm_entry_open"/>
      </record>

      <!-- SCM menus -->

      <menuitem id="menu_scm"
        name="SCM"
        sequence="4"
        groups="group_scm_manager"
        web_icon="ihhg_master,static/description/icon.png" />

      <menuitem id="menu_scm_scm_entry"
        action="ihhg_master.action_scm_entry_open"
        name="SCM Entry"
        sequence="1"
        parent="menu_scm" />

      <menuitem id="menu_scm_visibility_calendar"
        action="ihhg_master.action_item_line_gantt_open"
        name="Visibility Calendar"
        sequence="2"
        parent="menu_scm" />

      <menuitem id="menu_scm_channel"
        action="ihhg_master.action_channel_open"
        name="Channel"
        sequence="3"
        parent="menu_scm" />

      <menuitem id="menu_scm_selection_criteria"
        action="ihhg_master.action_selection_criteria_open"
        name="Selection Criteria"
        sequence="4"
        parent="menu_scm" />

      <menuitem id="menu_scm_store_regulations"
        action="ihhg_master.action_store_regulations_open"
        name="Store Regulations"
        sequence="5"
        parent="menu_scm" />

      <menuitem id="menu_scm_store_regulation_entry"
        action="ihhg_master.action_store_regulation_entry_open"
        name="Store Regulation Entry"
        sequence="6"
        parent="menu_scm" />

      <!-- SCM menus - Configuration -->

      <menuitem id="menu_scm_configuration"
        name="Configuration"
        sequence="7"
        parent="menu_scm" />

      <menuitem id="menu_scm_configuration_package"
        action="ihhg_master.action_package_open"
        name="Package"
        sequence="1"
        parent="menu_scm_configuration" />

      <menuitem id="menu_scm_configuration_package_list"
        action="ihhg_master.action_package_list_open"
        name="Package List"
        sequence="2"
        parent="menu_scm_configuration" />

      <menuitem id="menu_scm_configuration_item"
        action="ihhg_master.action_item_open"
        name="Item"
        sequence="3"
        parent="menu_scm_configuration" />

      <menuitem id="menu_scm_configuration_item_tags"
        action="ihhg_master.action_item_tags_open"
        name="Item Tags"
        sequence="4"
        parent="menu_scm_configuration" />

      <menuitem id="menu_scm_configuration_category"
        action="ihhg_master.action_category_open"
        name="Category"
        sequence="5"
        parent="menu_scm_configuration" />

      <menuitem id="menu_scm_configuration_campaign_type"
        action="ihhg_master.action_campaign_type_open"
        name="Campaign Type"
        sequence="6"
        parent="menu_scm_configuration" />

      <menuitem id="menu_scm_configuration_posm_master"
        action="product.product_template_action"
        name="POSM Master"
        sequence="7"
        parent="menu_scm_configuration" />

      <menuitem id="menu_scm_configuration_scm_address"
        action="account.res_partner_action_customer"
        name="Address"
        sequence="8"
        parent="menu_scm_configuration" />

      <menuitem id="menu_scm_configuration_represented_store"
        action="ihhg_master.action_represented_stores_open"
        name="Represented Stores"
        sequence="9"
        parent="menu_scm_configuration" />

  </data>
</odoo>
